#!/bin/bash
set -e

case "$1" in
    purge)
        # Remove configuration files on purge
        rm -rf /etc/bastion
        rm -f /var/log/bastion-daemon.log
        rm -rf /var/log/bastion
        rm -rf /var/run/bastion
        
        # Remove user and group
        userdel bastion 2>/dev/null || true
        groupdel bastion 2>/dev/null || true
        
        echo "Bastion Firewall configuration purged"
        ;;
    remove|upgrade|failed-upgrade|abort-install|abort-upgrade|disappear)
        # Keep configuration files on normal removal
        ;;
esac

# Update desktop database
update-desktop-database 2>/dev/null || true

# Reload systemd
systemctl daemon-reload 2>/dev/null || true

exit 0
